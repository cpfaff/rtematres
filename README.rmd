# The R package for tematres

```{r include = F, eval =T}
require(devtools)
remove.packages("rtematres")
install_github(username = "cpfaff", repo = "rtematres", subdir = "rtematres") 
require(rtematres)
```

The `rtematres` package is an api package to exploit vocabulary or formal 
representations of knowledge on any [tematres server](http://www.vocabularyserver.com/)
instance. It gives you access to the base API functions and their
documentation and offers convenient wrapper functions that ease the explotion
of the vocabolary.

### Development note:

The package is still in an early state and currently under improvement. This
might reseult in changing of function names and a high possiblity of finding an
unusable package in the master branch. If you are interested to get a currently
stable version please install from Cran.

### Install

#### From CRAN

Find the package and manual on [CRAN](http://cran.r-project.org/web/packages/rtematres/index.html). You
can simply install the version hosted there issuing the command below:

```
install.packages("rtematres")
```

#### From github

The installation from Github requires the `devtools` package.

```
# install devtools:
install.packages("devtools")
# install rtematres:
library(devtools)
install_github(username = "cpfaff", repo = "rtematres", subdir = "rtematres") 
```

### Usage

#### Load the package

After installation load the package:

```
library(rtematres)
```

#### Options

* List options

`rtematres.options()`

* Set options

`rtematres.options("tematres_url" = "http://url.to/your/tematres/server")`
`rtematres.options("tematres_service_url" = "http://url.to/your/tematres/server/api")`

Note: `tematres_url` is informative only atm but you need to set the url in `tematres_service_ur`
to the `services.php` of the tematres server. This is the the access to the api.


#### Exploit the vocabulary 

You have access to a few convenient functions to exploit the vocabulary hosted
on your tematres vocabulary server.

* search

Search for terms by name. You can also include the notes in your search. This
will provide you with terms mentioning the search term in their definition.  If
you search for one letter it will list all terms that begin with the letter.

```{r}
rtematres(task = "search", term = "plant")
```

```{r}
rtematres(task = "search", term = "plant organ", includenotes = T)
```

```{r}
rtematres(task = "search", term = "p")
```

* define

Fetches definitions from definition notes of a concept in your thesaurus.

```{r}
rtematres(task = "define", term = "plant organ")
```

* broaden/narrow

Fetches broader or narrower terms for a term you provide

```{r}
rtematres(task = "broaden", term = "plant organ")
```

```{r}
rtematres(task = "narrow", term = "plant organ")
```

#### Helper

* convert a term to the index id of your term in your thesaurus

```{r}
rtematres.api.conversion.term_id(given = "plant organ")
```

## Get information 

This example uses the tematres server of the BEF-China project:

* Display server and vocabulary information:

```{r}
rtematres.api(task = "fetchVocabularyData")
```

## Annotate data frames

* Example 

```{r}
tree <- c(1,2,3,4,5,6,7,8, 9)                        
plantorgan <- c("branch","flower","fruit","inflorescence", "leaf","seed", "twig", "branch", "leaf")                        
species <- c("acer platanum","fagus sylvatica","betula pendula","acer platanum", "fagus sylvatica","fagus sylvatica", "fagus sylvatica", "Viburnum sempervirens", "lala pubescens")                        
myframe <- data.frame(tree = tree, "plant organ" = plantorgan, "species names" = species)
annotate.dataframe(myframe)
```



[![Bitdeli Badge](https://d2weczhvl823v0.cloudfront.net/cpfaff/rtematres/trend.png)](https://bitdeli.com/free "Bitdeli Badge")

